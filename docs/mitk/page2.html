<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《MITK Linux编译教程》 | Yi-yezi blog</title>
    <meta name="description" content="Yi-yezi的个人博客">
    
    
    <link rel="preload" href="/assets/css/0.styles.ea883dff.css" as="style"><link rel="preload" href="/assets/js/app.11c1ca3a.js" as="script"><link rel="preload" href="/assets/js/2.b78ce613.js" as="script"><link rel="preload" href="/assets/js/4.5932e131.js" as="script"><link rel="prefetch" href="/assets/js/10.96bb75eb.js"><link rel="prefetch" href="/assets/js/11.8c5d833c.js"><link rel="prefetch" href="/assets/js/12.96eaa12e.js"><link rel="prefetch" href="/assets/js/13.af307893.js"><link rel="prefetch" href="/assets/js/14.07bad987.js"><link rel="prefetch" href="/assets/js/15.2bd4ffbe.js"><link rel="prefetch" href="/assets/js/16.f9245d66.js"><link rel="prefetch" href="/assets/js/17.2e7db2ea.js"><link rel="prefetch" href="/assets/js/3.b6b653f5.js"><link rel="prefetch" href="/assets/js/5.de5098dc.js"><link rel="prefetch" href="/assets/js/6.f15c092a.js"><link rel="prefetch" href="/assets/js/7.b39106ac.js"><link rel="prefetch" href="/assets/js/8.615a3287.js"><link rel="prefetch" href="/assets/js/9.0a5857ca.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ea883dff.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Yi-yezi blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">文档</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/Yi-yezi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">文档</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/Yi-yezi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编译原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MITK</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/mitk/page1.html" class="sidebar-link">《MITK windows10编译教程》</a></li><li><a href="/docs/mitk/page2.html" class="active sidebar-link">《MITK Linux编译教程》</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mitk/page2.html#编译前注意事项" class="sidebar-link">编译前注意事项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mitk/page2.html#软件版本注意" class="sidebar-link">软件版本注意</a></li><li class="sidebar-sub-header"><a href="/docs/mitk/page2.html#环境变量配置" class="sidebar-link">环境变量配置</a></li><li class="sidebar-sub-header"><a href="/docs/mitk/page2.html#依赖包" class="sidebar-link">依赖包</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/mitk/page2.html#编译流程" class="sidebar-link">编译流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mitk/page2.html#_1-cmake生成项目" class="sidebar-link">1. CMake生成项目</a></li><li class="sidebar-sub-header"><a href="/docs/mitk/page2.html#_2-make" class="sidebar-link">2. make</a></li><li class="sidebar-sub-header"><a href="/docs/mitk/page2.html#_3-运行软件" class="sidebar-link">3. 运行软件</a></li></ul></li></ul></li><li><a href="/docs/mitk/page3.html" class="sidebar-link">《MITK 添加插件教程》</a></li><li><a href="/docs/mitk/page4.html" class="sidebar-link">《MITK 入门学习之我见》</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="《mitk-linux编译教程》"><a href="#《mitk-linux编译教程》" aria-hidden="true" class="header-anchor">#</a> 《MITK Linux编译教程》</h1> <div class="tip custom-block"><p class="custom-block-title">关于本教程</p> <p>本篇博客介绍MITK平台在Linux下编译的方法，由于网上已经有很多教程了，本不想重复造轮子，但自己在编译过程中遇到了一些其他人没有遇到过的问题，在此记录下来，帮助大家。</p></div> <div class="tip custom-block"><p class="custom-block-title">编译</p> <p>MITK有源码目录，与superbuild目录，编译好的程序中一切修改都是对MITK源码目录中的文件进行的修改，因此即使编译了两份程序，如果共用的是同一份源码目录，那么是一样的</p></div> <p><em>参考博客（请结合本文与以下博客学习）<br></em> <em><a href="https://blog.csdn.net/qq_26477745/article/details/83934163" target="_blank" rel="noopener noreferrer">VS2017+Qt5.9.6+MITK-2016.11编译与安装-亲测有效2018-11-10<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br></em> <em><a href="https://neurita.github.io/how_to_compile_mitk_on_ubuntu" target="_blank" rel="noopener noreferrer">How to compile MITK on Ubuntu<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br></em> <em><a href="https://wangchi.art/2017/03/09/Install-MITK-in-Ubuntu16-04LTS/" target="_blank" rel="noopener noreferrer">Install MITK in Ubuntu16.04LTS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br></em> <em><a href="http://blog.51cto.com/weiyuqingcheng/2347996" target="_blank" rel="noopener noreferrer">MITK: 编译过程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br></em> <em>MITK交流群：242330546<br></em>
除此之外，我在解决问题过程中还查阅过很多资料，就不一一列举了，将在后文中讨论，在此感谢各位dalao们分享出自己的编译经验！<br></p> <h2 id="编译前注意事项"><a href="#编译前注意事项" aria-hidden="true" class="header-anchor">#</a> 编译前注意事项</h2> <div class="warning custom-block"><p>在开始编译前，请先确保以下软件能够正常运行，qtcreator能够创建项目并构建运行</p></div> <h3 id="软件版本注意"><a href="#软件版本注意" aria-hidden="true" class="header-anchor">#</a> 软件版本注意</h3> <p>以下列出我使用的各软件版本，软件安装配置过程不再赘述，请参考文章开头链接：</p> <table><thead><tr><th>软件列表</th></tr></thead> <tbody><tr><td>cmake-3.14.0</td></tr> <tr><td>qt 5.12.1</td></tr> <tr><td>mitk git版本号<code>d265101b5e7102912b808302a0cf7e73784d8299</code></td></tr> <tr><td>git 2.17.1</td></tr> <tr><td>ubuntu 18.04LTS</td></tr></tbody></table> <p>只要满足
<em><a href="http://docs.mitk.org/2018.04/BuildInstructionsPage.html" target="_blank" rel="noopener noreferrer">Build Instructions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em>
中的条件，一般不会出问题，MITK使用git下载即可<br> <code>git clone https://phabricator.mitk.org/source/mitk.git MITK</code><br>
此命令会默认下载master分支上最新的节点，但如果你觉得该版本无法编译，可以切换到我编译成功的版本(<code>d265101b5e7102912b808302a0cf7e73784d8299</code>)试一试，方法为：<br></p> <ol><li><code>git branch my_work d265101b5e</code> 创建my_work分支，指向给该节点<br></li> <li><code>git checkout my_work</code> 切换到my_work分支，此时本地版本已经变为<code>d265101d5e</code>这个版本了<br></li></ol> <h3 id="环境变量配置"><a href="#环境变量配置" aria-hidden="true" class="header-anchor">#</a> 环境变量配置</h3> <p>在开始编译前，请根据自己的目录自行调整,追加到~/.bashrc文件</p> <div class="language- extra-class"><pre class="language-text"><code>export PATH=$PATH:/opt/cmake-3.14.0-rcl-Linux-x86_64/bin
export QTDIR=/opt/Qt5.12.1/5.12.1
export PATH=$QTDIR/gcc_64/bin:$PATH
export LD_LIBRARY_PATH=$QTDIR/gcc_64/lib:$LD_LIBRARY_PATH 
</code></pre></div><h3 id="依赖包"><a href="#依赖包" aria-hidden="true" class="header-anchor">#</a> 依赖包</h3> <p>在开始编译前提前安装<br> <code>libgl1-mesa-dev libxrender1 libxkbcommon-x11 mesa-common-dev libglu1-mesa-dev libtiff5-dev libwrap0-dev libxt-dev libnss3 libasound2 libxi-dev gdb gcc g++</code></p> <h2 id="编译流程"><a href="#编译流程" aria-hidden="true" class="header-anchor">#</a> 编译流程</h2> <blockquote><p>以下我使用的是WSL（bash on windows，版本为Ubuntu18.04LTS)配合X410进行演示的，与实际Linux下安装并无差异</p></blockquote> <h3 id="_1-cmake生成项目"><a href="#_1-cmake生成项目" aria-hidden="true" class="header-anchor">#</a> 1. CMake生成项目</h3> <h4 id="_1-1-创建mitk-superbuild文件夹，第一次configure设置编译器"><a href="#_1-1-创建mitk-superbuild文件夹，第一次configure设置编译器" aria-hidden="true" class="header-anchor">#</a> 1.1. 创建MITK-superbuild文件夹，第一次configure设置编译器</h4> <p><img src="/assets/img/mitk_12.829064c0.png" alt=""></p> <h4 id="_1-2-勾选你需要的配置，再次configure至没有红色条"><a href="#_1-2-勾选你需要的配置，再次configure至没有红色条" aria-hidden="true" class="header-anchor">#</a> 1.2. 勾选你需要的配置，再次configure至没有红色条</h4> <ul><li><code>MITK_BUILD_EXAMPLES</code>：MITK的几个简单插件例子，建议勾选以供学习</li> <li><code>MITK_BUILD_ALLPLUGINS</code>：MITK的所有插件，建议勾选
<img src="/assets/img/mitk_13.7f4405e5.png" alt=""></li></ul> <h4 id="_1-3-generate"><a href="#_1-3-generate" aria-hidden="true" class="header-anchor">#</a> 1.3. generate</h4> <p><img src="/assets/img/mitk_14.7f4405e5.png" alt=""></p> <h3 id="_2-make"><a href="#_2-make" aria-hidden="true" class="header-anchor">#</a> 2. make</h3> <div class="language- extra-class"><pre class="language-text"><code>cd ~/MITK-superbuild
make -j6
</code></pre></div><p>该步骤可能会出现错误，但由于是多线程，其中一个线程运行错误，其他线程会运行完毕才会停止，导致错误信息被刷屏，因此make failed后继续多次<code>make -j6</code>，直至make停止在错误处无法继续，然后根据信息解决错误再继续make</p> <p>其中我遇到的问题为 <code>arith.h文件没有#endif</code>,对比windows版本的文件，具体出错原因不知，但我发现直接手动给文件添加#endif也是可以的，添加后继续make即可
<img src="/assets/img/mitk_15.edadbc59.png" alt=""></p> <h3 id="_3-运行软件"><a href="#_3-运行软件" aria-hidden="true" class="header-anchor">#</a> 3. 运行软件</h3> <div class="language- extra-class"><pre class="language-text"><code>./MITK-superbuild/MITK-build/bin/MitkWorkbench
</code></pre></div><p><img src="/assets/img/mitk_16.39b03bc9.png" alt="">
在未使用root权限运行时，发现无法写入数据库，因此更改该文件权限</p> <div class="language- extra-class"><pre class="language-text"><code>sudo chmod 777 /home/yi-yezi/.local/share/DKFZ/MITK Workbench_774235156/plugins.db
</code></pre></div><p>之后再次运行，如果没有安装完上文中所给出的依赖包，会报错，安装完成后，即可成功运行
<img src="/assets/img/mitk_17.83e3c676.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/mitk/page1.html" class="prev">
          《MITK windows10编译教程》
        </a></span> <span class="next"><a href="/docs/mitk/page3.html">
          《MITK 添加插件教程》
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.11c1ca3a.js" defer></script><script src="/assets/js/2.b78ce613.js" defer></script><script src="/assets/js/4.5932e131.js" defer></script>
  </body>
</html>
