<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《饥荒独立服务器搭建》 | Yi-yezi blog</title>
    <meta name="description" content="Yi-yezi的个人博客">
    
    
    <link rel="preload" href="/assets/css/0.styles.ea883dff.css" as="style"><link rel="preload" href="/assets/js/app.3f64a57c.js" as="script"><link rel="preload" href="/assets/js/2.0b6d75a7.js" as="script"><link rel="preload" href="/assets/js/5.2733c956.js" as="script"><link rel="prefetch" href="/assets/js/10.7f95b953.js"><link rel="prefetch" href="/assets/js/11.09274c66.js"><link rel="prefetch" href="/assets/js/12.e908f317.js"><link rel="prefetch" href="/assets/js/13.f3e67e0d.js"><link rel="prefetch" href="/assets/js/14.cd987e53.js"><link rel="prefetch" href="/assets/js/15.62f6f8ca.js"><link rel="prefetch" href="/assets/js/16.7f8735dc.js"><link rel="prefetch" href="/assets/js/17.24a236b5.js"><link rel="prefetch" href="/assets/js/18.9ea8a5ec.js"><link rel="prefetch" href="/assets/js/3.eb5c2161.js"><link rel="prefetch" href="/assets/js/4.10789602.js"><link rel="prefetch" href="/assets/js/6.1554a4cd.js"><link rel="prefetch" href="/assets/js/7.f1565da7.js"><link rel="prefetch" href="/assets/js/8.8aca10f7.js"><link rel="prefetch" href="/assets/js/9.c5e54943.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ea883dff.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Yi-yezi blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">文档</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/Yi-yezi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/docs/" class="nav-link router-link-active">文档</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div> <a href="https://github.com/Yi-yezi" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编译原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MITK</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>饥荒</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/DoNotStarve/page1.html" class="active sidebar-link">《饥荒独立服务器搭建》</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#软件版本注意" class="sidebar-link">软件版本注意</a></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#游戏准备" class="sidebar-link">游戏准备</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_1-游戏建档" class="sidebar-link">1. 游戏建档</a></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_2-新建并备份服务器密钥" class="sidebar-link">2.新建并备份服务器密钥</a></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_3-备份用户id" class="sidebar-link">3.备份用户ID</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#服务器端配置" class="sidebar-link">服务器端配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_1-安装steamcmd" class="sidebar-link">1.安装steamcmd</a></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_2-进入steamcmd，安装饥荒联机版服务器客户端" class="sidebar-link">2. 进入steamcmd，安装饥荒联机版服务器客户端</a></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_3-上传游戏档" class="sidebar-link">3. 上传游戏档</a></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_4-配置启动脚本" class="sidebar-link">4. 配置启动脚本</a></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_5-mod配置" class="sidebar-link">5. mod配置</a></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_6-添加服务器密钥和管理员名单" class="sidebar-link">6.添加服务器密钥和管理员名单</a></li><li class="sidebar-sub-header"><a href="/docs/DoNotStarve/page1.html#_7-启动服务器" class="sidebar-link">7.启动服务器</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="《饥荒独立服务器搭建》"><a href="#《饥荒独立服务器搭建》" aria-hidden="true" class="header-anchor">#</a> 《饥荒独立服务器搭建》</h1> <div class="tip custom-block"><p class="custom-block-title">关于本章</p> <p>饥荒服务器商Klei的服务器在国内不是很友好，客机体验极差，因此在云服务器上搭建一个独立的服务器是很好的选择，</p></div> <h2 id="软件版本注意"><a href="#软件版本注意" aria-hidden="true" class="header-anchor">#</a> 软件版本注意</h2> <p>以下列出我使用的各软件版本</p> <table><thead><tr><th>软件列表</th></tr></thead> <tbody><tr><td>ubuntu 18.04LTS</td></tr> <tr><td>steamcmd</td></tr></tbody></table> <h2 id="游戏准备"><a href="#游戏准备" aria-hidden="true" class="header-anchor">#</a> 游戏准备</h2> <h3 id="_1-游戏建档"><a href="#_1-游戏建档" aria-hidden="true" class="header-anchor">#</a> 1. 游戏建档</h3> <p>打开游戏，新建一个档，配置好游戏选项以及勾选需要的mod,生成世界
<img src="/assets/img/dst_1.6c7e9c5c.png" style="zoom:67%;"><br>
在游戏开始界面打开<code>数据</code>即可进入存档目录，根据建档时间找到相应的档目录即可,该档用于后续服务器端配置
<img src="/assets/img/dst_2.6847ce9c.png" style="zoom:67%;"><br></p> <h3 id="_2-新建并备份服务器密钥"><a href="#_2-新建并备份服务器密钥" aria-hidden="true" class="header-anchor">#</a> 2.新建并备份服务器密钥</h3> <p>在游戏开始界面打开<code>账号</code>-&gt;<code>游戏</code>-&gt;<code>饥荒联机版的游戏服务器</code>，添加服务器并备份服务器密钥
<img src="/assets/img/dst_3.4cc7a822.png" style="zoom:67%;"><br></p> <h3 id="_3-备份用户id"><a href="#_3-备份用户id" aria-hidden="true" class="header-anchor">#</a> 3.备份用户ID</h3> <p><img src="data:image/png;base64,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" style="zoom:67%;"><br></p> <h2 id="服务器端配置"><a href="#服务器端配置" aria-hidden="true" class="header-anchor">#</a> 服务器端配置</h2> <h3 id="_1-安装steamcmd"><a href="#_1-安装steamcmd" aria-hidden="true" class="header-anchor">#</a> 1.安装<code>steamcmd</code></h3> <blockquote><p>steamcmd是一个用于安装和更新steam上各种专用服务器的官方客户端</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">useradd</span> -m steam <span class="token comment">#为了使用安全，以root权限创建steam用户</span>
<span class="token function">cd</span> /home/steam
<span class="token comment"># 安装依赖</span>
<span class="token function">sudo</span> add-apt-repository multiverse
<span class="token function">sudo</span> dpkg --add-architecture i386
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> lib32gcc1 steamcmd 
</code></pre></div><h3 id="_2-进入steamcmd，安装饥荒联机版服务器客户端"><a href="#_2-进入steamcmd，安装饥荒联机版服务器客户端" aria-hidden="true" class="header-anchor">#</a> 2. 进入<code>steamcmd</code>，安装饥荒联机版服务器客户端</h3> <p>登陆</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./steamcmd.sh
login anonymous <span class="token comment"># 匿名用户登陆，需要账户则login &lt;username&gt;</span>
</code></pre></div><p>下载专用服务器</p> <div class="language-bash extra-class"><pre class="language-bash"><code>force_install_dir <span class="token punctuation">..</span>/dontstarvetogether_dedicated_server <span class="token comment">#设置专用服务器下载的位置</span>
app_update 343050 validate <span class="token comment"># 安装并验证软件版本 app_update &lt;app_id&gt; [-beta &lt;betaname&gt;] [-betapassword &lt;password&gt;] [validate]</span>
quit
</code></pre></div><div class="warning custom-block"><p>需要注意饥荒游戏更新后，若专用服务器软件未更新，当开启饥荒服务器时，游戏上是搜索不到服务器的，需要再一次执行上述安装的命令检查更新后再重新启动服务器</p></div> <h3 id="_3-上传游戏档"><a href="#_3-上传游戏档" aria-hidden="true" class="header-anchor">#</a> 3. 上传游戏档</h3> <p>将上文中备份的游戏档上传至云服务器，位置为</p> <div class="language-bash extra-class"><pre class="language-bash"><code>/home/.klei/DoDoNotStarveTogether
</code></pre></div><h3 id="_4-配置启动脚本"><a href="#_4-配置启动脚本" aria-hidden="true" class="header-anchor">#</a> 4. 配置启动脚本</h3> <p>脚本中注释的目录位置请根据个人配置自行核对更改
<code>vim ./start.sh</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

steamcmd_dir<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$HOME</span>/steamcmd&quot;</span> <span class="token comment"># steamcmd的目录，根据个人配置更改</span>
install_dir<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$HOME</span>/dstserver&quot;</span> <span class="token comment"># 饥荒专用服务器安装目录，根据个人配置更改</span>
cluster_name<span class="token operator">=</span><span class="token string">&quot;hainan&quot;</span>  <span class="token comment"># 游戏档目录名称，根据个人配置更改</span>
dontstarve_dir<span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$HOME</span>/.klei/DoNotStarveTogether&quot;</span> <span class="token comment"># 饥荒数据目录</span>

<span class="token keyword">function</span> fail<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token keyword">echo</span> Error: <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&amp;</span>2
        <span class="token keyword">exit</span> 1
<span class="token punctuation">}</span>

<span class="token keyword">function</span> check_for_file<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -e <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            fail <span class="token string">&quot;Missing file: <span class="token variable">$1</span>&quot;</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token function">cd</span> <span class="token string">&quot;<span class="token variable">$steamcmd_dir</span>&quot;</span> <span class="token operator">||</span> fail <span class="token string">&quot;Missing <span class="token variable">$steamcmd_dir</span> directory!&quot;</span> <span class="token comment"># TODO</span>

check_for_file <span class="token string">&quot;steamcmd.sh&quot;</span>
check_for_file <span class="token string">&quot;<span class="token variable">$dontstarve_dir</span>/<span class="token variable">$cluster_name</span>/cluster.ini&quot;</span>
check_for_file <span class="token string">&quot;<span class="token variable">$dontstarve_dir</span>/<span class="token variable">$cluster_name</span>/cluster_token.txt&quot;</span>
check_for_file <span class="token string">&quot;<span class="token variable">$dontstarve_dir</span>/<span class="token variable">$cluster_name</span>/Master/server.ini&quot;</span>
check_for_file <span class="token string">&quot;<span class="token variable">$dontstarve_dir</span>/<span class="token variable">$cluster_name</span>/Caves/server.ini&quot;</span>


check_for_file <span class="token string">&quot;<span class="token variable">$install_dir</span>/bin&quot;</span>

<span class="token function">cd</span> <span class="token string">&quot;<span class="token variable">$install_dir</span>/bin&quot;</span> <span class="token operator">||</span> fail 

run_shared<span class="token operator">=</span><span class="token punctuation">(</span>./dontstarve_dedicated_server_nullrenderer<span class="token punctuation">)</span>
run_shared+<span class="token operator">=</span><span class="token punctuation">(</span>-console<span class="token punctuation">)</span>
run_shared+<span class="token operator">=</span><span class="token punctuation">(</span>-cluster <span class="token string">&quot;<span class="token variable">$cluster_name</span>&quot;</span><span class="token punctuation">)</span>
run_shared+<span class="token operator">=</span><span class="token punctuation">(</span>-monitor_parent_process $$<span class="token punctuation">)</span>
run_shared+<span class="token operator">=</span><span class="token punctuation">(</span>-shard<span class="token punctuation">)</span>

<span class="token string">&quot;<span class="token variable">${run_shared[@]}</span>&quot;</span> Caves  <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/^/Caves:  /'</span> <span class="token operator">&amp;</span>
<span class="token string">&quot;<span class="token variable">${run_shared[@]}</span>&quot;</span> Master <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/^/Master: /'</span>

</code></pre></div><h3 id="_5-mod配置"><a href="#_5-mod配置" aria-hidden="true" class="header-anchor">#</a> 5. mod配置</h3> <p>在原先新建好的档已经配置好了mod,在启动服务器时就会开始下载相应的mod，mod下载目录为<code>&lt;专用服务器安装目录&gt;/mods</code>，第一次启动时可以直接从本地将相应的mod文件上传至云服务器，我的本地mod文件所在目录位置为<code>D:\steam\steam\steamapps\common\Don't Starve Together\mods</code> <img src="/assets/img/dst_6.dabbb0f5.png" style="zoom:67%;"><br>
如果需要继续添加mod，可以更改mod文件配置，这里先解析一下游戏档的目录结构</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Cluster_1
  -Caves <span class="token comment"># 洞穴配置文件</span>
    - <span class="token punctuation">..</span>.
    - <span class="token punctuation">..</span>.
    - modoverrides.lua
  -Master <span class="token comment"># 地面配置文件</span>
    - <span class="token punctuation">..</span>.
    - <span class="token punctuation">..</span>.
    - modoverrides.lua
  -cluster.ini <span class="token comment"># 服务器配置文件</span>
  -cluster_token.txt <span class="token comment"># 服务器密钥</span>
  -adminlist.txt <span class="token comment">#管理员名单</span>
</code></pre></div><p>在两个<code>modoverrides.lua</code>文件中添加相应的mod项即可，如果不知道添加方法，可以新建一个带该mod的档，复制mod配置文件中的项即可</p> <h3 id="_6-添加服务器密钥和管理员名单"><a href="#_6-添加服务器密钥和管理员名单" aria-hidden="true" class="header-anchor">#</a> 6.添加服务器密钥和管理员名单</h3> <p>在游戏档中添加<code>cluster_token.txt</code>（服务器密钥文件），将上文备份的密钥复制进文件中
在游戏档中添加<code>adminlist.txt</code>（管理员名单文件），将上文备份的自己的用户ID复制进文件中</p> <h3 id="_7-启动服务器"><a href="#_7-启动服务器" aria-hidden="true" class="header-anchor">#</a> 7.启动服务器</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>./start.sh
</code></pre></div><p>启动成功后可以看到<code>Sim pause</code>,<code>register in xx</code>字样</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/mitk/page4.html" class="prev">
          《MITK 入门学习之我见》
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3f64a57c.js" defer></script><script src="/assets/js/2.0b6d75a7.js" defer></script><script src="/assets/js/5.2733c956.js" defer></script>
  </body>
</html>
